## 1. 项目初始化

- [ ] 1.1 初始化 Go 模块 (go mod init)
- [ ] 1.2 创建项目目录结构 (cmd, pkg, internal, config)
- [ ] 1.3 添加必要的依赖 (YAML 解析库: gopkg.in/yaml.v3)
- [ ] 1.4 创建主程序入口文件 (cmd/game-control/main.go)
- [ ] 1.5 添加基础日志记录功能

## 2. 配置管理

- [ ] 2.1 定义配置结构体 (Config struct)
- [ ] 2.2 实现配置文件加载函数 (从 %USERPROFILE%\.config\game-control\config.yaml 加载)
- [ ] 2.3 实现配置验证逻辑 (验证时间限制、重置时间等)
- [ ] 2.4 实现配置默认值机制
- [ ] 2.5 支持自定义配置文件路径
- [ ] 2.6 添加游戏进程名单配置支持

## 3. 状态持久化

- [ ] 3.1 定义配额状态结构体 (QuotaState struct)
- [ ] 3.2 实现状态保存函数 (保存到 JSON 文件)
- [ ] 3.3 实现状态加载函数
- [ ] 3.4 实现状态文件完整性验证
- [ ] 3.5 实现定期状态持久化 (定时保存)

## 4. 游戏进程检测

- [ ] 4.1 实现进程扫描功能 (使用 Windows API 或调用 tasklist 命令)
- [ ] 4.2 实现进程名称匹配逻辑 (支持精确匹配配置名单)
- [ ] 4.3 实现进程状态跟踪 (记录启动/停止时间)
- [ ] 4.4 实现进程运行时计算
- [ ] 4.5 实现优雅的进程终止功能 (使用 Windows API TerminateProcess 或调用 taskkill)
- [ ] 4.6 添加进程终止重试机制
- [ ] 4.7 实现多游戏同时运行时的时间去重计算

## 5. 时间限制控制

- [ ] 5.1 实现累计游戏时间跟踪
- [ ] 5.2 实现剩余时间计算
- [ ] 5.3 实现时间限制检查逻辑
- [ ] 5.4 实现警告阈值检查 (15分钟、5分钟)
- [ ] 5.5 实现时间超限时终止游戏
- [ ] 5.6 实现超限后阻止新游戏启动
- [ ] 5.7 实现时间格式化显示 (Xh Ym 格式)

## 6. 每日配额重置

- [ ] 6.1 实现当前时间与重置时间比较逻辑
- [ ] 6.2 实现配额重置函数 (累计时间归零)
- [ ] 6.3 实现下次重置时间计算
- [ ] 6.4 实现启动时检查是否错过重置时间
- [ ] 6.5 实现手动重置命令
- [ ] 6.6 实现重置事件日志记录

## 7. 状态监控和日志

- [ ] 7.1 实现结构化 JSON 日志记录
- [ ] 7.2 实现游戏启动事件日志
- [ ] 7.3 实现游戏停止事件日志
- [ ] 7.4 实现配额重置事件日志
- [ ] 7.5 实现限制超限事件日志
- [ ] 7.6 实现状态显示命令 (显示累计时间、剩余时间、活跃进程)
- [ ] 7.7 实现下次重置时间显示

## 8. 主控制循环

- [ ] 8.1 实现主控制循环 (每5秒轮询)
- [ ] 8.2 集成进程检测逻辑
- [ ] 8.3 集成时间限制检查
- [ ] 8.4 集成配额重置检查
- [ ] 8.5 实现优雅的信号处理 (Ctrl+C 退出)
- [ ] 8.6 添加启动时 Windows 管理员权限检查

## 9. CLI 命令行界面

- [ ] 9.1 实现启动守护命令 (start)
- [ ] 9.2 实现状态查询命令 (status)
- [ ] 9.3 实现手动重置命令 (reset)
- [ ] 9.4 实现配置验证命令 (validate)
- [ ] 9.5 添加帮助信息 (help)

## 10. 测试和验证

- [ ] 10.1 编写配置管理单元测试
- [ ] 10.2 编写状态持久化单元测试
- [ ] 10.3 编写进程检测单元测试
- [ ] 10.4 编写时间控制单元测试
- [ ] 10.5 编写配额重置单元测试
- [ ] 10.6 集成测试 (端到端场景)
- [ ] 10.7 验证所有场景符合 spec 要求